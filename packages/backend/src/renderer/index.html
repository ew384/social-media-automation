<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https: http:; connect-src 'self' http://localhost:*;">
    <title>Agentic Browser - Multi-Account Browser</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <!-- 简化的Chrome风格标题栏 -->
        <header class="chrome-header">
            <!-- 标签页区域 -->
            <div class="tabs-container">
                <div id="tab-bar-content" class="tab-bar-content">
                    <!-- 动态生成的标签页 -->
                </div>
                <!-- 新建标签页按钮 -->
                <button id="new-tab-btn" class="new-tab-btn" title="新建标签页">+</button>
            </div>

            <!-- 导航栏 -->
            <div class="navigation-bar">
                <!-- 导航按钮 -->
                <div class="nav-buttons">
                    <button id="back-btn" class="nav-btn" title="后退">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z" />
                        </svg>
                    </button>
                    <button id="forward-btn" class="nav-btn" title="前进">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                        </svg>
                    </button>
                    <button id="refresh-btn" class="nav-btn" title="刷新">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                        </svg>
                    </button>
                </div>

                <!-- URL输入框 -->
                <div class="url-bar">
                    <input type="text" id="url-input" class="url-input" placeholder="搜索或输入网址">
                    <button id="go-btn" class="go-btn" title="转到">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- 浏览器内容区域 -->
        <main class="browser-content">
            <!-- 无标签页时显示的欢迎信息 -->
            <div id="no-tabs-message" class="no-tabs-message" style="display: none;">
                <div class="welcome-content">
                    <div class="welcome-icon">
                        <img src="../../assets/icon.png" alt="Multi-Account Browser" class="welcome-icon-img">
                    </div>
                    <h2>Agentic Browser</h2>
                    <p>点击 + 按钮创建第一个账号标签页</p>
                </div>
            </div>

            <!-- BrowserView内容区域 -->
            <div id="browser-view-container" class="browser-view-container"></div>
        </main>

        <!-- 新建标签页模态框 -->
        <div id="new-tab-modal" class="modal" style="display: none;">
            <div class="modal-overlay" onclick="hideNewTabDialog()"></div>
            <div class="modal-content modal-compact">
                <div class="modal-header">
                    <h3>新建账号标签页</h3>
                    <button class="close-btn" onclick="hideNewTabDialog()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="new-tab-form">
                        <div class="form-group">
                            <label for="account-name">账号名称</label>
                            <input type="text" id="account-name" class="form-input" placeholder="例如：小红书-账号A" required>
                        </div>

                        <div class="form-group">
                            <label for="platform">平台类型</label>
                            <select id="platform" class="form-select" required>
                                <option value="">选择平台</option>
                                <option value="xiaohongshu">小红书</option>
                                <option value="weixin">微信视频号</option>
                                <option value="douyin">抖音</option>
                                <option value="kuaishou">快手</option>
                                <option value="bilibili">B站</option>
                                <option value="other">其他</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="initial-url">初始URL</label>
                            <input type="url" id="initial-url" class="form-input"
                                placeholder="https://creator.xiaohongshu.com">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="hideNewTabDialog()">取消</button>
                    <button type="button" class="btn btn-primary" onclick="createNewTab()">创建</button>
                </div>
            </div>
        </div>
        <!-- 状态栏 -->
        <div class="status-bar">
            <div class="status-left">
                <span id="connection-status" class="status-item">
                    <span class="status-dot"></span>
                    <span class="status-text">检查连接中...</span>
                </span>
            </div>
            <div class="status-right">
                <span class="status-item">标签页: <span id="tab-count">0</span></span>
            </div>
        </div>

        <!-- 加载提示 -->
        <div id="loading" class="loading-overlay" style="display: none;">
            <div class="loading-content">
                <div class="spinner"></div>
                <p id="loading-text">处理中...</p>
            </div>
        </div>

        <!-- 通知容器 -->
        <div id="notification-container" class="notification-container"></div>
    </div>

    <!-- 脚本文件 -->
    <script src="components/TabBar.js"></script>
    <script src="renderer.js"></script>
</body>

</html>