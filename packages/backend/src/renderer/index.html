<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https: http:; connect-src 'self' http://localhost:*;">
    <title>Agentic Browser</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <!-- ÁÆÄÂåñÁöÑChromeÈ£éÊ†ºÊ†áÈ¢òÊ†è -->
        <header class="chrome-header">
            <!-- Á™óÂè£ÊéßÂà∂ÊåâÈíÆÂå∫Âüü (Á±ª‰ººChrome) -->
            <div class="window-controls" id="window-controls">
                <!-- macOS Ê†∑ÂºèÁöÑÊéßÂà∂ÊåâÈíÆ -->
                <div class="window-controls-mac" id="mac-controls" style="display: none;">
                    <button class="mac-btn close-btn" id="mac-close" title="ÂÖ≥Èó≠"></button>
                    <button class="mac-btn minimize-btn" id="mac-minimize" title="ÊúÄÂ∞èÂåñ"></button>
                    <button class="mac-btn maximize-btn" id="mac-maximize" title="ÂÖ®Â±è"></button>
                </div>
                
                <!-- Windows/Linux Ê†∑ÂºèÁöÑÊéßÂà∂ÊåâÈíÆ -->
                <div class="window-controls-win" id="win-controls" style="display: none;">
                    <button class="win-btn minimize-btn" id="win-minimize" title="ÊúÄÂ∞èÂåñ">
                        <svg width="10" height="10" viewBox="0 0 12 12">
                            <rect fill="currentColor" width="10" height="1" x="1" y="6"></rect>
                        </svg>
                    </button>
                    <button class="win-btn maximize-btn" id="win-maximize" title="ÊúÄÂ§ßÂåñ">
                        <svg width="10" height="10" viewBox="0 0 12 12">
                            <rect width="9" height="9" x="1.5" y="1.5" fill="none" stroke="currentColor"></rect>
                        </svg>
                    </button>
                    <button class="win-btn restore-btn" id="win-restore" title="ËøòÂéü" style="display: none;">
                        <svg width="10" height="10" viewBox="0 0 12 12">
                            <rect width="6" height="6" x="1.5" y="3.5" fill="none" stroke="currentColor"></rect>
                            <rect width="6" height="6" x="3.5" y="1.5" fill="none" stroke="currentColor"></rect>
                        </svg>
                    </button>
                    <button class="win-btn close-btn" id="win-close" title="ÂÖ≥Èó≠">
                        <svg width="10" height="10" viewBox="0 0 12 12">
                            <line x1="1" y1="1" x2="11" y2="11" stroke="currentColor"></line>
                            <line x1="11" y1="1" x2="1" y2="11" stroke="currentColor"></line>
                        </svg>
                    </button>
                </div>
                <!-- üî• Êñ∞Â¢ûÔºöÊãñÊãΩÂå∫Âüü -->
                <div class="drag-region" id="drag-region"></div>
            </div>            
            <!-- Ê†áÁ≠æÈ°µÂå∫Âüü -->
            <div class="tabs-container">
                <div id="tab-bar-content" class="tab-bar-content">
                    <!-- Âä®ÊÄÅÁîüÊàêÁöÑÊ†áÁ≠æÈ°µ -->
                </div>
                <!-- Êñ∞Âª∫Ê†áÁ≠æÈ°µÊåâÈíÆ -->
                <button id="new-tab-btn" class="new-tab-btn" title="Êñ∞Âª∫Ê†áÁ≠æÈ°µ">+</button>
            </div>

            <!-- ÂØºËà™Ê†è -->
            <div class="navigation-bar">
                <!-- ÂØºËà™ÊåâÈíÆ -->
                <div class="nav-buttons">
                    <button id="back-btn" class="nav-btn" title="ÂêéÈÄÄ">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z" />
                        </svg>
                    </button>
                    <button id="forward-btn" class="nav-btn" title="ÂâçËøõ">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                        </svg>
                    </button>
                    <button id="refresh-btn" class="nav-btn" title="Âà∑Êñ∞">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                        </svg>
                    </button>
                </div>

                <!-- URLËæìÂÖ•Ê°Ü -->
                <div class="url-bar">
                    <input type="text" id="url-input" class="url-input" placeholder="ÊêúÁ¥¢ÊàñËæìÂÖ•ÁΩëÂùÄ">
                    <button id="go-btn" class="go-btn" title="ËΩ¨Âà∞">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- ÊµèËßàÂô®ÂÜÖÂÆπÂå∫Âüü -->
        <main class="browser-content">
            <!-- Êó†Ê†áÁ≠æÈ°µÊó∂ÊòæÁ§∫ÁöÑÊ¨¢Ëøé‰ø°ÊÅØ -->
            <div id="no-tabs-message" class="no-tabs-message" style="display: none;">
                <div class="welcome-content">
                    <img id="welcome-icon" alt="Multi-Account Browser" class="welcome-icon-img">
                    <h2>Agentic Browser</h2>
                    <p>ÁÇπÂáª + ÊåâÈíÆÂàõÂª∫Á¨¨‰∏Ä‰∏™Ë¥¶Âè∑Ê†áÁ≠æÈ°µ</p>
                </div>
            </div>

            <!-- BrowserViewÂÜÖÂÆπÂå∫Âüü -->
            <div id="browser-view-container" class="browser-view-container"></div>
        </main>

        <!-- Êñ∞Âª∫Ê†áÁ≠æÈ°µÊ®°ÊÄÅÊ°Ü -->
        <div id="new-tab-modal" class="modal" style="display: none;">
            <div class="modal-overlay" onclick="hideNewTabDialog()"></div>
            <div class="modal-content modal-compact">
                <div class="modal-header">
                    <h3>Êñ∞Âª∫Ë¥¶Âè∑Ê†áÁ≠æÈ°µ</h3>
                    <button class="close-btn" onclick="hideNewTabDialog()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="new-tab-form">
                        <div class="form-group">
                            <label for="account-name">Ë¥¶Âè∑ÂêçÁß∞</label>
                            <input type="text" id="account-name" class="form-input" placeholder="‰æãÂ¶ÇÔºöÂ∞èÁ∫¢‰π¶-Ë¥¶Âè∑A" required>
                        </div>

                        <div class="form-group">
                            <label for="platform">Âπ≥Âè∞Á±ªÂûã</label>
                            <select id="platform" class="form-select" required>
                                <option value="">ÈÄâÊã©Âπ≥Âè∞</option>
                                <option value="xiaohongshu">Â∞èÁ∫¢‰π¶</option>
                                <option value="weixin">ÂæÆ‰ø°ËßÜÈ¢ëÂè∑</option>
                                <option value="douyin">ÊäñÈü≥</option>
                                <option value="kuaishou">Âø´Êâã</option>
                                <option value="bilibili">BÁ´ô</option>
                                <option value="other">ÂÖ∂‰ªñ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="initial-url">ÂàùÂßãURL</label>
                            <input type="url" id="initial-url" class="form-input"
                                placeholder="https://creator.xiaohongshu.com">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="hideNewTabDialog()">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" onclick="createNewTab()">ÂàõÂª∫</button>
                </div>
            </div>
        </div>
 
    </div>

    <!-- ËÑöÊú¨Êñá‰ª∂ -->
    <script src="components/TabBar.js"></script>
    <script src="renderer.js"></script>
</body>

</html>